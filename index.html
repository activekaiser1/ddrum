<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1000" height="1000" style="position:absolute;">
  <defs>
    <!-- define a prectattern using a yellow tile image -->
    <pattern id="bgimg" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <image x="0" y="0" width="60" height="60" xlink:href="https://www.w3schools.com/jsref/img_lamp.jpg" />
    </pattern>
  </defs>
</svg>
<svg id="myDIV" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="226" height="226" viewbox="180 180 140 140" style="border:solid 1px black;position:absolute;top:145px;left:145px;">
  <defs>
    <!-- define a p2ndttern using a yellow tile image -->
    <pattern id="bgimg" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <image x="0" y="0" width="60" height="60" xlink:href="https://www.w3schools.com/jsref/img_lamp.jpg" />
    </pattern>
  </defs>
</svg><svg id="myDIV" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="226" height="226" viewbox="180 180 140 140" style="border:solid 1px black;position:absolute;top:145px;left:145px;">
  <defs>
    <!-- define a p2ndttern using a yellow tile image -->
    <pattern id="bgimg" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <image x="0" y="0" width="60" height="60" xlink:href="https://www.w3schools.com/jsref/img_lamp.jpg" />
    </pattern>
  </defs>
</svg><svg id="myDIV" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="226" height="226" viewbox="180 180 140 140" style="border:solid 1px black;position:absolute;top:145px;left:145px;">
  <defs>
    <!-- define a p2ndttern using a yellow tile image -->
    <pattern id="bgimg" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <image x="0" y="0" width="60" height="60" xlink:href="https://www.w3schools.com/jsref/img_lamp.jpg" />
    </pattern>
  </defs>
</svg><svg id="myDIV" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="226" height="226" viewbox="180 180 140 140" style="border:solid 1px black;position:absolute;top:145px;left:145px;">
  <defs>
    <!-- define a p2ndttern using a yellow tile image -->
    <pattern id="bgimg" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <image x="0" y="0" width="60" height="60" xlink:href="https://www.w3schools.com/jsref/img_lamp.jpg" />
    </pattern>
  </defs>
</svg><svg id="myDIV" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="226" height="226" viewbox="180 180 140 140" style="border:solid 1px black;position:absolute;top:145px;left:145px;">
  <defs>
    <!-- define a p2ndttern using a yellow tile image -->
    <pattern id="bgimg" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <image x="0" y="0" width="60" height="60" xlink:href="https://www.w3schools.com/jsref/img_lamp.jpg" />
    </pattern>
  </defs>
</svg>
<svg id="myDIV" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="226" height="226" viewbox="180 180 140 140" style="border:solid 1px black;position:absolute;top:145px;left:145px;">
  <defs>
    <!-- define a p2ndttern using a yellow tile image -->
    <pattern id="bgimg" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
      <image x="0" y="0" width="60" height="60" xlink:href="https://www.w3schools.com/jsref/img_lamp.jpg" />
    </pattern>
  </defs>
</svg>

<svg id="zer" style="z-index:10;" height="100" width="100">
  <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
</svg>


<script>
var yuu = 0;
var xzib = document.querySelectorAll("svg");
var arra = [];
var colu = [
"blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue",



];




let initPos;
let calibrate = true;

document.body.addEventListener("click", () => {calibrate = true})

function handleSensor(e){
      let quaternion = e.target.quaternion;
      let angles = toEuler(quaternion);

      if(calibrate){
        initPos = angles;
        calibrate = false;
      }
     
      let dist = angles.map((angle, i) => calcDist(angle, initPos[i]));
  
  document.getElementById('zer').style.left = 250 + 'px';
  document.getElementById('zer').style.top = 250 +'px';


     // alert(dist);
}  
const sensor = new AbsoluteOrientationSensor({frequency: 60});
sensor.addEventListener("reading", (e) => handleSensor(e));
sensor.start();



function toEuler(q) {
      let sinr_cosp = 2 * (q[3] * q[0] + q[1] * q[2]);
      let cosr_cosp = 1 - 2 * (q[0] * q[0] + q[1] * q[1]);
      let roll = Math.atan2(sinr_cosp, cosr_cosp);

      let siny_cosp = 2 * (q[3] * q[2] + q[0] * q[1]);
      let cosy_cosp = 1 - 2 * (q[1] * q[1] + q[2] * q[2]);
      let yaw = Math.atan2(siny_cosp, cosy_cosp);
 
      return [yaw, roll];
}

function calcDist(angle, initAngle) {
        angle = (angle - initAngle) * (180 / Math.PI);
        angle = angle < 0 ? angle + 360 : angle;
        angle = angle > 180 ? angle - 360 : angle;
 
        let dist = Math.round(-800 * Math.tan(angle * (Math.PI / 180)));
        return dist;
}














 function createL(svg, x1, y1, x2, y2, color, thick,i,ii) {
 var points = [x1,y1,x2,y2];
    var l = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    
    l.setAttribute("class", "yulu");
    l.setAttribute("x1", points[0]);
    l.setAttribute("y1", points[1]);
    l.setAttribute("x2", points[2]);
    l.setAttribute("y2", points[3]);
    l.style = "transform-box: fill-box;transform-origin: center;stroke:" + color + ";stroke-width:" + thick;
    l.style.transform = "rotate(" + i + "deg)";
    svg.appendChild(l);


  }



  var i;
  for (i = 0; i < 360; i++) {

    createL(xzib[1], 177.5, 177.5, 322.5, 322.5, colu[i], 1, i/2,i)

};


var i;
  for (i = 0; i < 360; i++) { 
    

    

}
var counter = 0;
setInterval(function(){ 
counter++;

xzib[1].style.width = 250 +'px';
     xzib[1].style.height = 250 + 'px';
  xzib[1].style.top = 0 +'px';
   xzib[1].style.left = 0 +'px';
   
   xzib[2].style.width = 250 -50 + counter +'px';
     xzib[2].style.height = 250 -50 + counter + 'px';
  xzib[2].style.top = 50/2 - counter/2 +'px';
   xzib[2].style.left = 50/2 - counter/2 +'px';
   
    xzib[3].style.width = 250 -(50*2) + counter  +'px';
     xzib[3].style.height = 250 -(50*2) + counter  + 'px';
  xzib[3].style.top = 50  - counter/2 +'px';
   xzib[3].style.left = 50 - counter/2 +'px';
   
      xzib[4].style.width = 250 -(50*3) + counter +'px';
     xzib[4].style.height = 250 -(50*3) + counter + 'px';
  xzib[4].style.top = 50*1.5  - counter/2  +'px';
   xzib[4].style.left = 50*1.5  - counter/2  +'px';
   
     xzib[5].style.width = 250 -(50*4) + counter +'px';
     xzib[5].style.height = 250 -(50*4) + counter + 'px';
  xzib[5].style.top = 50*2  - counter/2 +'px';
   xzib[5].style.left = 50*2  - counter/2 +'px';
   
     xzib[6].style.width = 250 -(50*5) + counter +'px';
     xzib[6].style.height = 250 -(50*5) + counter + 'px';
  xzib[6].style.top = 50*2.5  - counter/2 +'px';
   xzib[6].style.left = 50*2.5  - counter/2 +'px';
   
   if(counter==50){counter=0;};
  
  }, 300);
  
  
</script>
